<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content>
    <meta name="author" content>
    <title>Please sign in</title>
    <meta charset="UTF-8">
    <title>cars</title>
    <link rel="stylesheet" href="https://snipp.ru/cdn/chosen/1.8.7/chosen.min.css">
    <script src="https://snipp.ru/cdn/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://snipp.ru/cdn/chosen/1.8.7/chosen.jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">



    <script th:inline="javascript">

    $(document).ready(function(){


         let number = [[${cars}]];

         let number2 = [[${clients}]];




         $("#car").change(function() {
         var cars = [];
         var tableExist = false;
         $.each($("#car option:selected"), function(){
            cars.push($(this).val());
        });



            let container = document.getElementById("container1");

            while (container.hasChildNodes()) {

                container.removeChild(container.lastChild);
            }



           for (let i = 0; i < number.length; i++) {


                if (cars.includes(number[i]["carId"].toString())) {
                    tableExist = true;
                    break;
                }

            }

            if (tableExist) {


<!--                container.append("<table id='head'> <tr> <td>Id</td> <td>Model</td> <td>CarReg</td> <td>Mark</td> <td>Status</td> </tr> </table>");-->
<!--                container.innerHTML += "<table id='head'> <tr> <td>Id</td> <td>Model</td> <td>CarReg</td> <td>Mark</td> <td>Status</td> </tr> </table>";-->
                var cringe = "<table class='table table-bordered'> <tr> <td>Id</td> <td>Model</td> <td>CarReg</td> <td>Mark</td> <td>Status</td> </tr>";
                var head = $("#head");

                for (let i = 0; i < number.length; i++) {

                    if (cars.includes(number[i]["carId"].toString())) {
                        var str = "<tr>" + "<td>" + number[i]["carId"] + "</td>" +
                         "<td>" + number[i]["carMark"] + "</td>" +
                         "<td>" + number[i]["carModel"] + "</td>" +
                         "<td>" + number[i]["carRegistrationNumber"] + "</td>" +
                         "<td>" + number[i]["carStatus"] + "</td>"  + "</tr>"
                         cringe += str;

                    }

                }
                cringe += "</table>";
                container.innerHTML += cringe;
            }


         });

         $("#client").change(function() {
         var clients = [];
         var tableExist = false;
         $.each($("#client option:selected"), function(){
            clients.push($(this).val());
        });

            let container = document.getElementById("container2");



            while (container.hasChildNodes()) {
                container.removeChild(container.lastChild);
            }


            for (let i = 0; i < number2.length; i++) {


                if (clients.includes(number2[i]["clientID"].toString())) {
                    tableExist = true;
                    break;
                }

            }


            if (tableExist) {


                var cringe = "<table class='table table-bordered' > <tr> <td>Id</td> <td>Full name</td> <td>Passport</td> <td>phoneNumber</td> <td>email</td> </tr>";


                for (let i = 0; i < number2.length; i++) {

                    if (clients.includes(number2[i]["clientID"].toString())) {
                        var str = "<tr>" + "<td>" + number2[i]["clientID"] + "</td>" +
                         "<td>" + number2[i]["fullName"] + "</td>" +
                         "<td>" + number2[i]["passport"] + "</td>" +
                         "<td>" + number2[i]["phoneNumber"] + "</td>" +
                         "<td>" + number2[i]["email"] + "</td>"  + "</tr>"
                         cringe += str;

                    }

                }
                cringe += "</table>";
                container.innerHTML += cringe;
            }


         });


        });


    $(document).ready(function(){
        $('#car').chosen({
            width: '50%',
            no_results_text: 'Совпадений не найдено',
            placeholder_text_multiple: 'Выберите машину'
        });
        $('#client').chosen({
            width: '50%',
            no_results_text: 'Совпадений не найдено',
            placeholder_text_multiple: 'Выберите клиента'
        });
        $(document).ready(function() {
        console.log($("#log").css("width"));
          $("#reg").css({
            'width': ($("#log").css("width") + 'px')
          });
          $("#reg").css({
            'height': ($("#log").css("height") + 'px')
          });



});

    });
    </script>


</head>


<body>

<div class="cardelete m-4">


    <h3>Удаление машины</h3>





    <div class="container ml-2">
        <form class="form-signin" role="form" th:action="@{/home/deletecar}" th:method="post">

            <select class="js-chosen" multiple="true" name="car" id="car" required th:name="cars" >
                <option  value=""></option>
                <option th:each="car: ${cars}" th:value="${car.carId}" th:text="|${car.carId} ${car.carRegistrationNumber}|">
                </option>
            </select> <br>
            <input type="submit" name="Отправить" class="my-2 ml-0">
        </form>


        <div id="container1">

        </div>
    </div>

</div>

<div class="clientdelete m-4">

    <h3>Удаление клиента</h3>

    <div class="container ml-2">
        <form class="form-signin" role="form" th:action="@{/home/deleteclient}" th:method="post">

            <select class="js-chosen" multiple="true" name="client" id="client" required th:name="clients" >
                <option  value=""></option>
                <option th:each="client, role: ${clients}" th:value="${client.clientID}" th:text="|${client.clientID} ${client.fullName}|">
                </option>
            </select> <br>
            <input type="submit" id="log" name="Отправить" class="ml-0 my-2">
        </form>


        <div id="container2">

        </div>

    </div>
    <p><a href="/home" class="text-dark">Домой</a> </p>

</div>







</body>
</html>